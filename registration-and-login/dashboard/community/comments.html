<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Post Viewer</title>
  <link rel="stylesheet" href="comments.css" />

  <!-- FontAwesome CSS для иконок -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />

  <!-- Firebase SDK (compat версии) через CDN -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    /* --- Общие стили --- */
    .post-actions, .comment-actions {
      display: flex;
      gap: 16px;
      margin-top: 16px;
    }

    .post-action {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 14px;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s ease;
      background: none;
      border: none;
    }

    .post-action i {
      font-size: 18px;
      color: inherit;
      transition: transform 0.2s ease;
    }

    .post-action:hover {
      background-color: #f3f4f6;
      color: #2563eb;
      transform: translateY(-1px);
    }

    .post-action.like-btn.liked,
    .post-action.like-btn[aria-pressed="true"] {
      color: #808080;
    }

    .post-action.reply-btn:hover {
      color: #808080;
    }

    .comment {
      background: #ffffff;
      border: 1px solid #d1d5db;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      transition: all 0.15s ease;
    }

    .comment:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .comment-author {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .comment-author .avatar {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      object-fit: cover;
      background: #f3f4f6;
    }

    .comment-author-name {
      font-weight: 600;
      font-size: 14px;
    }

    .comment-date {
      font-size: 12px;
      color: #9ca3af;
    }

    .comment-content {
      margin-bottom: 12px;
      font-size: 14px;
      color: #374151;
    }

    .modal.hidden {
      display: none;
    }

    /* --- Вложения --- */
    .post-attachments {
      margin: 12px 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .post-image {
      max-width: 700px;
      max-height: 600px;
      width: 100%;
      height: auto;
      border-radius: 8px;
      object-fit: cover;
    }

    .post-attachment {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      background-color: #f3f4f6;
      font-size: 14px;
      color: #374151;
      cursor: pointer;
      transition: background-color 0.2s ease, color 0.2s ease;
    }

    .post-attachment:hover {
      background-color: #3b82f6;
      color: #ffffff;
    }

    .download-btn {
      background-color: #3b82f6;
      color: #ffffff;
      border: none;
      padding: 4px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
    }

    .download-btn:hover {
      background-color: #2563eb;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Community Post</h1>
    </header>

    <main class="main-content">
      <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <p>Loading post...</p>
      </div>

      <div id="error" class="error hidden">
        <p id="error-message"></p>
        <button id="retry-btn" class="retry-btn">Retry</button>
      </div>

      <!-- --- ПОСТ --- -->
      <article id="post" class="post hidden">
        <div class="post-header">
          <div class="post-author">
            <img id="post-author-avatar" class="avatar" alt="Author avatar" src="" />
            <div class="author-info">
              <h3 id="post-author-name" class="author-name">Loading...</h3>
              <time id="post-date" class="post-date">Loading...</time>
            </div>
          </div>
        </div>

        <div class="post-content">
          <p id="post-text">Loading...</p>
        </div>

        <!-- Вложения -->
        <div id="post-attachments" class="post-attachments">
          <!-- Пример изображения -->
          <!-- <img class="post-image" src="https://example.com/photo.jpg" alt="Post image"> -->

          <!-- Пример файла -->
          <!--
          <div class="post-attachment">
            <span>Document.pdf</span>
            <button class="download-btn" onclick="window.open('https://example.com/document.pdf', '_blank')">Download</button>
          </div>
          -->
        </div>

        <!-- Действия -->
        <div class="post-actions">
          <button 
            id="post-like-btn" 
            class="post-action like-btn" 
            data-action="like" 
            aria-pressed="false">
            <i class="far fa-heart"></i>
            <span id="post-like-count">0</span>
          </button>

          <button 
            id="post-reply-btn" 
            class="post-action reply-btn" 
            data-action="reply">
            <i class="far fa-comment"></i>
            <span>Reply</span>
          </button>
        </div>
      </article>

      <!-- --- Комментарии --- -->
      <section class="comments-section">
        <h3 class="comments-title">Comments</h3>

        <div id="comment-input-section" class="comment-input-section">
          <textarea id="comment-input" class="comment-input" placeholder="Write a comment..." rows="3"></textarea>
          <div class="comment-input-actions">
            <button id="post-comment-btn" class="post-comment-btn">Post Comment</button>
          </div>
        </div>

        <div id="comments-container" class="comments-container">
          <!-- Здесь будут динамически загружаться комментарии -->
        </div>
      </section>
    </main>
  </div>

  <!-- --- Модалка для ответа --- -->
  <div id="reply-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="reply-modal-title">Reply to Comment</h3>
        <button id="close-reply-modal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <textarea id="reply-input" class="reply-input" placeholder="Write your reply..." rows="3"></textarea>
        <div class="modal-actions">
          <button id="cancel-reply" class="cancel-btn">Cancel</button>
          <button id="submit-reply" class="submit-btn">Post Reply</button>
        </div>
      </div>
    </div>
  </div>

  <script src="comments.js"></script>
</body>
</html>
